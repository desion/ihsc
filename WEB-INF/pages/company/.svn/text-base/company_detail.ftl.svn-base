<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<title><@s.text name="company.detail" /></title>
<#include "../common_header.ftl"/>
<script type="text/javascript">
   function changeAction(url)
   {
      var form=document.getElementById("mdfForm");
      form.action=url;
   	  form.submit();
   }
   
   function userListAction(url)
   {
      var form=document.getElementById("comIdForm");
      form.action=url;
      form.submit();
   }
  
   $(document).ready(function(){
   	   $(":checkbox").each(function(){
           $(this).click(function(){
              if($(this).attr("checked")==true){
                  $(this).removeAttr("checked");
              }else{
                  $(this).attr("checked","checked");
              }
           });
       });
   });
   
   function changeActionConfirm(url,msg){
    var flag= confirm(msg);
       if(flag==true){
          changeAction(url);
        }
   }
   function deleteData(url){
       var msg = "<@s.text name="BSC00003" />";
       changeActionConfirm(url,msg);
   }
   
  function deleteDataForTemp(url){
       var msg = "<@s.text name="BSC00002" />";
       changeActionConfirm(url,msg);
   }
   
   function recover(url){
       var msg = "<@s.text name="BSC00004" />";
       changeActionConfirm(url,msg);
   }
</script>
</head>
<body>
<#escape x as x?html>
<#include "../components/error_reference.ftl"/>
<div id="container" >
 <#include "../header.ftl"/>
     <div id="view">
       <div class="fields">
        <form id="mdfForm" action="BS005_30" method="post">
        <table cellspacing="0" cellpadding="0" border="0" class="table_line2">
           <tbody>
              <tr>
                <td>             
			         <table width="70%" class="field_tbl" align="center">
				        <tr>
						   <th align="center" colspan="2" ><label><@s.text name="company.info" /></label></th>
						</tr> 
					    <tr>
						    <td class="lcell" width="20%"><label><@s.text name="company.code" /></label></td>
						    <td width="80%" ><label>${company.code!""}</label></td>
						    <input type="hidden" name="company.code"  value="${company.code!""}" />
						</tr>  
						<tr>
			                <td class="lcell"><label><@s.text name="company.companyTypeName" /></label></td>
			                <td><label>${company.companyTypeName!""}</label></td>
			                <input type="hidden" name="company.companyTypeName" value="${company.companyTypeName!""}" />
			            </tr> 
						<tr>
			                <td class="lcell"><label><@s.text name="company.shortName" /></label></td>
			                <td><label>${company.shortName!""}</label></td>
			                <input type="hidden" name="company.shortName"  value="${company.shortName!""}" />
			            </tr>
			            <input type="hidden" name="company.typeId"  value="${company.typeId!""}" />
			            <#if company.typeId?? && company.typeId.indexOf(",4,") !=-1> 
						    <tr>
						        <td class="lcell"><label><@s.text name="company.mainCompanyName" /></label></td>
						        <td  ><label>${company.mainCompanyName!""}</label></td>
						        <input type="hidden" name="company.mainCompanyName" value="${company.mainCompanyName!""}" />
						    </tr>
						     <tr>
				                <td class="lcell"><label><@s.text name="company.subCompanyName" /></label></td>
				                <td  ><label>${company.subCompanyName!""}</label></td>
				                <input type="hidden" name="company.subCompanyName" value="${company.subCompanyName!""}" />
				            </tr>
			            <#else>
			              <tr>
			                   <td class="lcell"><label><@s.text name="company.name" /></label></td>
			                   <td  ><label>${company.mainCompanyName!""}</label></td>
			                   <input type="hidden" name="company.mainCompanyName" value="${company.mainCompanyName!""}" />
			               </tr>
			            </#if>
					    <tr>
					        <td class="lcell"><label><@s.text name="company.address1" /></label></td>
					        <td ><label>${company.address1!""}</label></td>
					        <input type="hidden" name="company.address1" value="${company.address1!""}" />
					    </tr>
					    <tr>
					        <td class="lcell"><label><@s.text name="company.address2" /></label></td>
					        <td><label>${company.address2!""}</label></td>
					        <input type="hidden" name="company.address2" value="${company.address2!""}" />
					    </tr>		    
					    <tr>
					        <td class="lcell"><label><@s.text name="company.cityName" /></label></td>
			                <td><label>${company.cityName!""}</label></td>
			                <input type="hidden" name="company.cityName" value="${company.cityName!""}" />
					    </tr>
					    <tr>
			                <td class="lcell"><label><@s.text name="company.zipCode" /></label></td>
			                <td><label>${company.zipCode!""}</label></td>
			                <input type="hidden" name="company.zipCode" value="${company.zipCode!""}" />
			            </tr>
					    <tr>
					        <td class="lcell"><label><@s.text name="company.tel1" /></label></td>
					        <td><label>${company.tel1!""}</label></td>
					        <input type="hidden" name="company.tel1" value="${company.tel1!""}" />
					    </tr>
					    <tr>
					        <td class="lcell"><label><@s.text name="company.tel2" /></label></td>
					        <td><label>${company.tel2!""}</label></td>
					        <input type="hidden" name="company.tel2" value="${company.tel2!""}" />
					    </tr>
					    <tr>
					        <td class="lcell"><label><@s.text name="company.fax" /></label></td>
					        <td><label>${company.fax!""}</label></td>
					        <input type="hidden" name="company.fax" value="${company.fax!""}" />
					    </tr>
					    <tr>
					        <td class="lcell"><label><@s.text name="company.homePage" /></label></td>
					        <td><label>${company.homePage!""}</label></td>
					        <input type="hidden" name="company.homePage" value="${company.homePage!""}" />
					    </tr>
					    <tr>
					        <td class="lcell"><label><@s.text name="company.email" /></label></td>
					        <td><label>${company.email!""}</label></td>
					        <input type="hidden" name="company.email" value="${company.email!""}" />
					    </tr>
					</table>
                </td>
              </tr>
           </tbody>
        </table> 
        <#if company.typeId.indexOf(",3,") !=-1  && ((company.id == loginUser.companyID) || (loginUser.filter("company_mng_all_data")))> 	    
		   <div class="gridview" style="margin:10px auto;">
	         <table cellspacing="0" cellpadding="0" border="0" class="table_line2">
	            <tbody>
	               <tr>
	                 <td>     		   
			            <table  class="field_tbl" width="70%" cellspacing="0" cellpadding="0" >
			                <tr>
			                   <th style="text-align:center"><label><@s.text name="company.agentProduct" /></label></th>
			                </tr>
			                <tr>
			                 <td>
			                   <div style="height:300px;overflow-y:scroll;overflow-x:hidden">
			                      <table class="field_tbl" width="98%">
			                          <@s.action name="product_category_agent_tree" executeResult="true" ignoreContextParams="true"> 
			                             <@s.param name="agentComId">${company.id!-1}</@s.param>
			                          </@s.action>
			                      </table>
			                    </div>  
			                 </td>
			              </tr>   
		               </table>
	                </td>
	              </tr>
	           </tbody>
	          </table> 		               
	          </div>
	        </#if>
       
        <#if company.typeId.indexOf(",3,") !=-1 && ((company.id == loginUser.companyID) || (loginUser.filter("company_mng_all_data")))>       
          <div class="gridview" style="margin:10px auto;">
	        <table cellspacing="0" cellpadding="0" border="0" class="table_line2">
	           <tbody>
	              <tr>
	                <td>               
			            <table  class="field_tbl" width="70%" cellspacing="0" cellpadding="0" >
			               <tr>
			                  <th colspan="2" style="text-align:center">
			                     <label><@s.text name="company.customer" /></label>
			                  </th>
			               </tr>
			               <tr>
			                 <td>
			                   <div style="height:300px;overflow-y:scroll;overflow-x:hidden">
			                      <table class="field_tbl" width="98%">
			                        <@s.action name="company_agent_customer_list" executeResult="true" ignoreContextParams="true"> 
			                            <@s.param name="agentComId">${company.id!-1}</@s.param>
			                        </@s.action>
			                      </table>
			                    </div>  
			                 </td>
			              </tr>   
		            </table>
                 </td>
               </tr>
            </tbody>
           </table>  		            
          </div>
         </#if>
	       <input type="hidden" name="company.deleted" value="${company.deleted!-1}" />
	       <input type="hidden" name="company.id" value="${company.id!-1}" />
           <input type="hidden" name="company.exclusiveKey" value="${company.exclusiveKey!-1}"  />
        </form>  
          
        <form id="comIdForm">
            <input type="hidden" name="user.companyID" value="${company.id!-1}" />
        </form> 
         
	   <div class="btn_row">
	       <#if company.deleted==0>      
	          <#if loginUser.hasPermission("BS005_30")>       
                 <button type="button" onClick="changeAction('BS005_30')" ><@s.text name="btn_modify" /></button>
              </#if>   
           </#if>
           <#if loginUser.hasPermission("BS005_22")>         
                <button type="button" onClick="changeAction('BS005_22')" ><@s.text name="btn_template_add" /></button>
           </#if>
           
           <#if company.deleted==0>        
             <#if loginUser.hasPermission("BS005_33")>      
               <button type="button" onClick="deleteDataForTemp('BS005_33')" ><@s.text name="btn_delete" /></button>
             </#if>  
           <#else>
             <#if loginUser.hasPermission("BS005_34")>      
               <button type="button" onClick="recover('BS005_34')" ><@s.text name="btn_recovery" /></button>
             </#if>  
             <#if loginUser.hasPermission("BS005_40")>              
                <button type="button" onClick="deleteData('BS005_40')" ><@s.text name="btn_delete_forever" /></button>
             </#if>
           </#if>
           <#if loginUser.hasPermission("BS007_10")>  
               <button type="button" onClick="userListAction('BS007_10')" ><@s.text name="btn_company_user" /></button>
           </#if>
        </div>        

     </div>  
   </div>  
  <#include "../footer.ftl"/>        
</div>
</#escape>  
</body>
</html>